{"version":3,"sources":["settings.js","components/loginFacade.js","components/LogIn.js","components/Home.js","components/Drivers.js","components/Trucks.js","App.js","index.js"],"names":["URL","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","facade","setToken","token","localStorage","setItem","getToken","getItem","loggedIn","console","log","logout","removeItem","login","user","pass","options","makeOptions","username","password","fetch","then","catch","err","getRole","jwtData","split","decodedJwtJsonData","window","atob","JSON","parse","roles","fetchAllDrivers","fetchAllTrucks","deleteDriver","id","editDriver","name","createDriver","fetchPersonsByHobby","hobby","fetchPersonById","fetchPersonByEmail","email","fetchPersonByPhone","phone","fetchData","method","addToken","body","opts","headers","Accept","this","stringify","LogIn","props","useState","setUser","setPass","onClick","evt","preventDefault","onChange","target","value","placeholder","type","Home","Drivers","allDrivers","setAllDrivers","map","driver","key","uuid","firstName","lastName","trucks","a","driverToDelete","Number","document","getElementById","deletingDriver","driverData","getData","driverToEditId","driverToEditName","editingDriver","driverToCreateName","creatingDriver","Trucks","allTrucks","setAllTrucks","truck","capacity","Header","className","exact","activeClassName","to","NoMatch","App","setLoggedIn","useEffect","truckData","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.58b6ca10.chunk.js","sourcesContent":["// const URL = \"https://mukh.dk/3rdSemExam\";\r\n\r\nconst URL = \"http://localhost:8080/3rdSemExam\";\r\n\r\nexport default URL;","import URL from \"../settings\";\r\n\r\nfunction handleHttpErrors(res) {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n}\r\n\r\nclass LoginFacade {\r\n  setToken = token => {\r\n    localStorage.setItem(\"jwtToken\", token);\r\n  };\r\n  getToken = () => {\r\n    return localStorage.getItem(\"jwtToken\");\r\n  };\r\n  loggedIn = () => {\r\n    console.log(\"loggedIn func\");\r\n    const loggedIn = this.getToken() != null;\r\n    return loggedIn;\r\n  };\r\n  logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  };\r\n  login = (user, pass) => {\r\n    console.log(\"user, pass\", user, pass);\r\n    const options = this.makeOptions(\"POST\", true, {\r\n      username: user,\r\n      password: pass\r\n    });\r\n    return fetch(URL + \"/api/login\", options)\r\n      .then(handleHttpErrors)\r\n      .then(res => {\r\n        this.setToken(res.token);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  getRole = () => {\r\n    let jwt = localStorage.getItem(\"jwtToken\");\r\n    let jwtData = jwt.split(\".\")[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    return decodedJwtData.roles;\r\n  };\r\n\r\n  makeOptions(method, addToken, body) {\r\n    console.log(\"makeOptions\");\r\n    var opts = {\r\n      method: method,\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    };\r\n    if (addToken && this.loggedIn()) {\r\n      opts.headers[\"x-access-token\"] = this.getToken();\r\n    }\r\n    if (body) {\r\n      opts.body = JSON.stringify(body);\r\n    }\r\n    console.log(\"opts\", opts);\r\n    return opts;\r\n  }\r\n\r\n  fetchAllDrivers = () => {\r\n    console.log(\"fetchingAllDrivers\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/alldrivers\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchAllTrucks = () => {\r\n    console.log(\"fetchingAllTrucks\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/alltrucks\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  deleteDriver = (id) => {\r\n    console.log(\"Deleting driver\", id);\r\n    const options = this.makeOptions(\"DELETE\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/deletedriver/\" + id, options);\r\n  };\r\n\r\n  editDriver = (id, name) => {\r\n    console.log(\"Editing driver\", name);\r\n    const options = this.makeOptions(\"PUT\", true, name); //True add's the token\r\n    return fetch(URL + \"/api/exam/editdriver/\" + id, options).then(handleHttpErrors);\r\n  };\r\n\r\n  createDriver = (name) => {\r\n    console.log(\"Creating driver\", name);\r\n    const options = this.makeOptions(\"POST\", true, name); //True add's the token\r\n    return fetch(URL + \"/api/exam/createdriver\", options).then(handleHttpErrors);\r\n  };\r\n\r\n\r\n  fetchPersonsByHobby = (hobby) => {\r\n    console.log(\"fetchingPersonsByHobby\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/hobby/\" + hobby, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonById = (id) => {\r\n    console.log(\"fetchingPersonById\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/id/\" + id, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonByEmail = (email) => {\r\n    console.log(\"fetchingPersonByEmail\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/email/\" + email, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonByPhone = (phone) => {\r\n    console.log(\"fetchingPersonByPhone\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/phone/\" + phone, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchData = () => {\r\n    console.log(\"fetchData\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    if (this.getRole() === \"admin\") {\r\n      return fetch(URL + \"/api/info/admin\", options).then(handleHttpErrors);\r\n    } else {\r\n      return fetch(URL + \"/api/info/user\", options).then(handleHttpErrors);\r\n    }\r\n  };\r\n}\r\nconst facade = new LoginFacade();\r\nexport default facade;\r\n","import React, { useState } from \"react\";\r\n\r\nfunction LogIn(props) {\r\n  console.log(\"LogIn\");\r\n  const [user, setUser] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  console.log(\"user, pass\", user, pass)\r\n\r\n  const login = (evt) => {\r\n    console.log(\"LogIn - login\");\r\n    evt.preventDefault();\r\n    console.log(\"user, pass\", user, pass)\r\n    props.login(user, pass);\r\n  };\r\n\r\n  const logout = (evt) => {\r\n    console.log(\"LogIn - logout\");\r\n    evt.preventDefault();\r\n    props.logout();\r\n  };\r\n\r\n  const onChange = evt => {\r\n    console.log(\"onChange  ->\", evt.target.id);\r\n    if ([evt.target.id] == \"username\") {\r\n      console.log(\"username\", evt.target.value);\r\n      setUser(evt.target.value);\r\n    } else {\r\n      console.log(\"password\", evt.target.value);\r\n      setPass(evt.target.value);\r\n    }\r\n  };\r\n\r\n  if (!props.loggedIn) {\r\n    return (\r\n      <div>\r\n        <h2>Login</h2>\r\n        <form onChange={onChange}>\r\n          <input placeholder=\"User Name\" id=\"username\" />\r\n          <input placeholder=\"Password\" id=\"password\" type=\"password\" />\r\n          <button onClick={login}>Login</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <h2>Logout</h2>\r\n        <button onClick={logout}>Logout</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LogIn;","import React from \"react\";\r\n\r\nfunction Home() {\r\n    console.log(\"Home\");\r\n    return (\r\n        <div>\r\n            <hr/>\r\n                <h2>Welcome to 3rdSemExam</h2>\r\n            <hr/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\n\r\nfunction Drivers({ loggedIn, allDrivers, setAllDrivers }) {\r\n    console.log(\"Drivers\");\r\n\r\n    const deleteDriverById = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    var driverToDelete = Number(document.getElementById(\"driverToDelete\").value);\r\n                    console.log(\"driverToDelete\", driverToDelete);\r\n                    const deletingDriver = await facade.deleteDriver(driverToDelete);\r\n                    console.log(\"Deleting Driver\", deletingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n    const editDriver = () => {\r\n        if (loggedIn) {\r\n            \r\n            const getData = async () => {\r\n                try {\r\n                    var driverToEditId = Number(document.getElementById(\"driverToEdit\").value);\r\n                    var driverToEditName = {\r\n                        firstName: document.getElementById(\"driverToEditFirstName\").value, \r\n                        lastName: document.getElementById(\"driverToEditLastName\").value\r\n                    };\r\n                    const editingDriver = \r\n                    await facade.editDriver(driverToEditId, driverToEditName);\r\n                    console.log(\"Editing Driver\", editingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n      const createDriver = () => {\r\n        if (loggedIn) {\r\n            \r\n            const getData = async () => {\r\n                try {\r\n                    var driverToCreateName = {\r\n                        firstName: document.getElementById(\"driverToCreateFirstName\").value, \r\n                        lastName: document.getElementById(\"driverToCreateLastName\").value\r\n                    };\r\n                    const creatingDriver = \r\n                    await facade.createDriver(driverToCreateName);\r\n                    console.log(\"Creating Driver\", creatingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n        if(facade.getRole() === \"admin\"){\r\n        return (\r\n        <div>\r\n        <h3>Drivers</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Driver Id</b></td><td><b>First name</b></td><td><b>Last name</b></td><td><b>Truck name</b></td></tr></thead>\r\n             <tbody>\r\n                {allDrivers.map((driver) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{driver.id}</td>\r\n                        <td>{driver.firstName}</td>\r\n                        <td>{driver.lastName}</td>\r\n                        <td>{driver.trucks[0].name}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        <select id=\"driverToDelete\">\r\n            <option> - select a Driver to delete - </option>\r\n            {allDrivers.map((driver) => {\r\n            return <option key={uuid()} value={driver.id}>{driver.id} - {driver.firstName}</option>;\r\n            })};\r\n        </select>\r\n        <button onClick={deleteDriverById} >Delete Driver</button>\r\n        <hr />\r\n        <select id=\"driverToEdit\">\r\n            <option> - select a Driver to edit - </option>\r\n            {allDrivers.map((driver) => {\r\n            return <option key={uuid()} value={driver.id}>{driver.id} - {driver.firstName}</option>;\r\n            })};\r\n        </select>\r\n            <input placeholder=\"First name\" type=\"text\" id=\"driverToEditFirstName\"/>\r\n            <input placeholder=\"Last name\" type=\"text\" id=\"driverToEditLastName\"/>\r\n            <button onClick={editDriver} >Edit Driver</button>\r\n        <hr />\r\n            <input placeholder=\"First name\" type=\"text\" id=\"driverToCreateFirstName\"/>\r\n            <input placeholder=\"Last name\" type=\"text\" id=\"driverToCreateLastName\"/>\r\n            <button onClick={createDriver} >Create Driver</button>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else if(facade.getRole() === \"user\"){\r\n        return (\r\n        <div>\r\n        <h3>Drivers</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Driver Id</b></td><td><b>First name</b></td><td><b>Last name</b></td><td><b>Truck name</b></td></tr></thead>\r\n             <tbody>\r\n                {allDrivers.map((driver) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{driver.id}</td>\r\n                        <td>{driver.firstName}</td>\r\n                        <td>{driver.lastName}</td>\r\n                        <td>{driver.trucks[0].name}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else {\r\n        return (\r\n        <div>\r\n            <h2> Please login to view data</h2>\r\n        </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Drivers;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\n\r\nfunction Trucks({ loggedIn, allTrucks, setAllTrucks }) {\r\n    console.log(\"Trucks\");\r\n\r\n    if(loggedIn){\r\n        return (\r\n        <div>\r\n        <h3>Trucks</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Truck Id</b></td><td><b>Truck name</b></td><td><b>Capacity</b></td></tr></thead>\r\n             <tbody>\r\n                {allTrucks.map((truck) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{truck.id}</td>\r\n                        <td>{truck.name}</td>\r\n                        <td>{truck.capacity}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else {\r\n        return (\r\n        <div>\r\n            <h2> Please login to view data</h2>\r\n        </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Trucks;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Switch\r\n} from \"react-router-dom\";\r\nimport facade from \"./components/loginFacade\";\r\nimport LogIn from \"./components/LogIn\";\r\nimport Home from \"./components/Home\";\r\nimport Drivers from \"./components/Drivers\";\r\nimport Trucks from \"./components/Trucks\";\r\n\r\nfunction App() {\r\n  console.log(\"App\");\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const [loggedIn, setLoggedIn] = useState(token ? true : false);\r\n  const [allDrivers, setAllDrivers] = useState([]);\r\n  const [allTrucks, setAllTrucks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n        const getData = async () => {\r\n            try {\r\n                const driverData = await facade.fetchAllDrivers();\r\n                console.log(\"driverData\", driverData);\r\n                setAllDrivers(driverData);\r\n                const truckData = await facade.fetchAllTrucks();\r\n                console.log(\"truckData\", truckData);\r\n                setAllTrucks(truckData);\r\n            } catch (e) {\r\n                console.log(\"err\", e);\r\n            }\r\n        };\r\n        getData();\r\n    }\r\n}, [loggedIn]);\r\n\r\n  const logout = () => {\r\n    console.log(\"App - logout\");\r\n    facade.logout();\r\n    setLoggedIn(false);\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  const login = (user, pass) => {\r\n    console.log(\"App - login\");\r\n    facade.login(user, pass).then(res => setLoggedIn(true));\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  return (\r\n    <div>\r\n      <Router >\r\n        <div>\r\n          <Header loggedIn={loggedIn} />\r\n          <Switch>\r\n            <Route exact path=\"/\"><Home /></Route>\r\n            <Route path=\"/drivers\"><Drivers loggedIn={loggedIn} allDrivers={allDrivers} setAllDrivers={setAllDrivers}/></Route>\r\n            <Route path=\"/trucks\"><Trucks loggedIn={loggedIn} allTrucks={allTrucks} setAllTrucks={setAllTrucks}/></Route>\r\n            <Route path=\"/log\"><LogIn\r\n              facade={facade}\r\n              loggedIn={loggedIn}\r\n              login={login}\r\n              logout={logout}\r\n            /></Route>\r\n            <Route component={NoMatch} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Header({ loggedIn }) {\r\n  console.log(\"Header\");\r\n  return (\r\n    <div>\r\n      <ul className=\"header\">\r\n        <li><NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/drivers\">{loggedIn ? <div>Drivers</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/trucks\">{loggedIn ? <div>Trucks</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/log\">{loggedIn ? <div>Logout</div> : <div>Login</div>}</NavLink></li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction NoMatch() {\r\n  console.log(\"NoMatch\");\r\n  return (\r\n  <Home />\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}