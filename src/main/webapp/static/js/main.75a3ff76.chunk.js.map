{"version":3,"sources":["settings.js","components/loginFacade.js","components/LogIn.js","components/Home.js","components/Drivers.js","components/Trucks.js","App.js","index.js"],"names":["URL","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","facade","setToken","token","localStorage","setItem","getToken","getItem","loggedIn","console","log","logout","removeItem","login","user","pass","options","makeOptions","username","password","fetch","then","catch","err","getRole","jwtData","split","decodedJwtJsonData","window","atob","JSON","parse","roles","fetchAllDrivers","fetchAllTrucks","deleteDriver","id","editDriver","name","createDriver","fetchData","method","addToken","body","opts","headers","Accept","this","stringify","LogIn","props","useState","setUser","setPass","onClick","evt","preventDefault","onChange","target","value","placeholder","type","Home","Drivers","allDrivers","setAllDrivers","map","driver","key","uuid","firstName","lastName","trucks","a","driverToDelete","Number","document","getElementById","deletingDriver","driverData","getData","driverToEditId","driverToEditName","editingDriver","driverToCreateName","creatingDriver","Trucks","allTrucks","setAllTrucks","truck","capacity","Header","className","exact","activeClassName","to","NoMatch","App","setLoggedIn","useEffect","truckData","path","component","ReactDOM","render"],"mappings":"4RAIeA,EAJH,6BCEZ,SAASC,EAAiBC,GACxB,OAAKA,EAAIC,GAGFD,EAAIE,OAFFC,QAAQC,OAAO,CAAEC,OAAQL,EAAIK,OAAQC,UAAWN,EAAIE,S,IAwGhDK,EADA,I,4DAjGbC,SAAW,SAAAC,GACTC,aAAaC,QAAQ,WAAYF,I,KAEnCG,SAAW,WACT,OAAOF,aAAaG,QAAQ,a,KAE9BC,SAAW,WAGT,OAFAC,QAAQC,IAAI,iBACwB,MAAnB,EAAKJ,Y,KAGxBK,OAAS,WACPP,aAAaQ,WAAW,a,KAE1BC,MAAQ,SAACC,EAAMC,GACbN,QAAQC,IAAI,aAAcI,EAAMC,GAChC,IAAMC,EAAU,EAAKC,YAAY,QAAQ,EAAM,CAC7CC,SAAUJ,EACVK,SAAUJ,IAEZ,OAAOK,MAAM5B,EAAM,aAAcwB,GAC9BK,KAAK5B,GACL4B,MAAK,SAAA3B,GACJ,EAAKQ,SAASR,EAAIS,UAEnBmB,OAAM,SAAAC,GACL,MAAMA,M,KAIZC,QAAU,WACR,IACIC,EADMrB,aAAaG,QAAQ,YACbmB,MAAM,KAAK,GACzBC,EAAqBC,OAAOC,KAAKJ,GAErC,OADqBK,KAAKC,MAAMJ,GACVK,O,KAsBxBC,gBAAkB,WAChBxB,QAAQC,IAAI,sBACZ,IAAMM,EAAU,EAAKC,YAAY,OAAO,GACxC,OAAOG,MAAM5B,EAAM,uBAAwBwB,GAASK,KAAK5B,I,KAG3DyC,eAAiB,WACfzB,QAAQC,IAAI,qBACZ,IAAMM,EAAU,EAAKC,YAAY,OAAO,GACxC,OAAOG,MAAM5B,EAAM,sBAAuBwB,GAASK,KAAK5B,I,KAG1D0C,aAAe,SAACC,GACd3B,QAAQC,IAAI,kBAAmB0B,GAC/B,IAAMpB,EAAU,EAAKC,YAAY,UAAU,GAC3C,OAAOG,MAAM5B,EAAM,0BAA4B4C,EAAIpB,I,KAGrDqB,WAAa,SAACD,EAAIE,GAChB7B,QAAQC,IAAI,iBAAkB4B,GAC9B,IAAMtB,EAAU,EAAKC,YAAY,OAAO,EAAMqB,GAC9C,OAAOlB,MAAM5B,EAAM,wBAA0B4C,EAAIpB,GAASK,KAAK5B,I,KAGjE8C,aAAe,SAACD,GACd7B,QAAQC,IAAI,kBAAmB4B,GAC/B,IAAMtB,EAAU,EAAKC,YAAY,QAAQ,EAAMqB,GAC/C,OAAOlB,MAAM5B,EAAM,yBAA0BwB,GAASK,KAAK5B,I,KAG7D+C,UAAY,WACV/B,QAAQC,IAAI,aACZ,IAAMM,EAAU,EAAKC,YAAY,OAAO,GACxC,MAAuB,UAAnB,EAAKO,UACAJ,MAAM5B,EAAM,kBAAmBwB,GAASK,KAAK5B,GAE7C2B,MAAM5B,EAAM,iBAAkBwB,GAASK,KAAK5B,I,wDAvD3CgD,EAAQC,EAAUC,GAC5BlC,QAAQC,IAAI,eACZ,IAAIkC,EAAO,CACTH,OAAQA,EACRI,QAAS,CACP,eAAgB,mBAChBC,OAAQ,qBAUZ,OAPIJ,GAAYK,KAAKvC,aACnBoC,EAAKC,QAAQ,kBAAoBE,KAAKzC,YAEpCqC,IACFC,EAAKD,KAAOb,KAAKkB,UAAUL,IAE7BlC,QAAQC,IAAI,OAAQkC,GACbA,M,MCZIK,MAlDf,SAAeC,GACbzC,QAAQC,IAAI,SADQ,MAEIyC,mBAAS,IAFb,mBAEbrC,EAFa,KAEPsC,EAFO,OAGID,mBAAS,IAHb,mBAGbpC,EAHa,KAGPsC,EAHO,KA8BpB,OA1BA5C,QAAQC,IAAI,aAAcI,EAAMC,GA0B3BmC,EAAM1C,SAaP,6BACE,sCACA,4BAAQ8C,QAhCC,SAACC,GACd9C,QAAQC,IAAI,kBACZ6C,EAAIC,iBACJN,EAAMvC,WA6BF,WAbF,6BACE,qCACA,0BAAM8C,SAfK,SAAAF,GACf9C,QAAQC,IAAI,eAAgB6C,EAAIG,OAAOtB,IAChB,YAAnB,CAACmB,EAAIG,OAAOtB,KACd3B,QAAQC,IAAI,WAAY6C,EAAIG,OAAOC,OACnCP,EAAQG,EAAIG,OAAOC,SAEnBlD,QAAQC,IAAI,WAAY6C,EAAIG,OAAOC,OACnCN,EAAQE,EAAIG,OAAOC,UASf,2BAAOC,YAAY,YAAYxB,GAAG,aAClC,2BAAOwB,YAAY,WAAWxB,GAAG,WAAWyB,KAAK,aACjD,4BAAQP,QA/BF,SAACC,GACb9C,QAAQC,IAAI,iBACZ6C,EAAIC,iBACJ/C,QAAQC,IAAI,aAAcI,EAAMC,GAChCmC,EAAMrC,MAAMC,EAAMC,KA2BZ,YC1BK+C,MAXf,WAEI,OADArD,QAAQC,IAAI,QAER,6BACI,6BACI,qDACJ,+B,gBCuIGqD,MA3If,YAA2D,IAAxCvD,EAAuC,EAAvCA,SAAUwD,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,cAkEjC,OAjEJxD,QAAQC,IAAI,WAiEgB,UAArBT,EAAOuB,UAEV,6BACA,uCACA,6BACA,+BACI,+BAAO,4BAAI,4BAAI,yCAAqB,4BAAI,0CAAsB,4BAAI,yCAAqB,4BAAI,4CAC1F,+BACIwC,EAAWE,KAAI,SAACC,GAAD,OACZ,wBAAIC,IAAKC,OACL,4BAAKF,EAAO/B,IACZ,4BAAK+B,EAAOG,WACZ,4BAAKH,EAAOI,UACZ,4BAAKJ,EAAOK,OAAO,GAAGlC,YAKtC,6BACA,4BAAQF,GAAG,kBACP,mEACC4B,EAAWE,KAAI,SAACC,GACjB,OAAO,4BAAQC,IAAKC,MAAQV,MAAOQ,EAAO/B,IAAK+B,EAAO/B,GAA/C,MAAsD+B,EAAOG,cAHxE,KAMA,4BAAQhB,QAxFa,WACjB9C,GACa,uCAAG,gCAAAiE,EAAA,sEAEJC,EAAiBC,OAAOC,SAASC,eAAe,kBAAkBlB,OACtElD,QAAQC,IAAI,iBAAkBgE,GAHtB,SAIqBzE,EAAOkC,aAAauC,GAJzC,cAIFI,EAJE,OAKRrE,QAAQC,IAAI,kBAAmBoE,GALvB,SAMiB7E,EAAOgC,kBANxB,OAMF8C,EANE,OAORtE,QAAQC,IAAI,aAAcqE,GAC1Bd,EAAcc,GARN,kDAURtE,QAAQC,IAAI,MAAZ,MAVQ,0DAAH,oDAabsE,KAyEJ,iBACA,6BACA,4BAAQ5C,GAAG,gBACP,iEACC4B,EAAWE,KAAI,SAACC,GACjB,OAAO,4BAAQC,IAAKC,MAAQV,MAAOQ,EAAO/B,IAAK+B,EAAO/B,GAA/C,MAAsD+B,EAAOG,cAHxE,KAMI,2BAAOV,YAAY,aAAaC,KAAK,OAAOzB,GAAG,0BAC/C,2BAAOwB,YAAY,YAAYC,KAAK,OAAOzB,GAAG,yBAC9C,4BAAQkB,QAhFG,WACX9C,GAEa,uCAAG,kCAAAiE,EAAA,sEAEJQ,EAAiBN,OAAOC,SAASC,eAAe,gBAAgBlB,OAChEuB,EAAmB,CACnBZ,UAAWM,SAASC,eAAe,yBAAyBlB,MAC5DY,SAAUK,SAASC,eAAe,wBAAwBlB,OALtD,SAQF1D,EAAOoC,WAAW4C,EAAgBC,GARhC,cAOFC,EAPE,OASR1E,QAAQC,IAAI,iBAAkByE,GATtB,SAUiBlF,EAAOgC,kBAVxB,OAUF8C,EAVE,OAWRtE,QAAQC,IAAI,aAAcqE,GAC1Bd,EAAcc,GAZN,kDAcRtE,QAAQC,IAAI,MAAZ,MAdQ,0DAAH,oDAiBbsE,KA4DA,eACJ,6BACI,2BAAOpB,YAAY,aAAaC,KAAK,OAAOzB,GAAG,4BAC/C,2BAAOwB,YAAY,YAAYC,KAAK,OAAOzB,GAAG,2BAC9C,4BAAQkB,QA7DO,WACf9C,GAEa,uCAAG,gCAAAiE,EAAA,sEAEJW,EAAqB,CACrBd,UAAWM,SAASC,eAAe,2BAA2BlB,MAC9DY,SAAUK,SAASC,eAAe,0BAA0BlB,OAJxD,SAOF1D,EAAOsC,aAAa6C,GAPlB,cAMFC,EANE,OAQR5E,QAAQC,IAAI,kBAAmB2E,GARvB,SASiBpF,EAAOgC,kBATxB,OASF8C,EATE,OAURtE,QAAQC,IAAI,aAAcqE,GAC1Bd,EAAcc,GAXN,kDAaRtE,QAAQC,IAAI,MAAZ,MAbQ,0DAAH,oDAgBbsE,KA0CA,iBACJ,8BAG2B,SAArB/E,EAAOuB,UAEb,6BACA,uCACA,6BACA,+BACI,+BAAO,4BAAI,4BAAI,yCAAqB,4BAAI,0CAAsB,4BAAI,yCAAqB,4BAAI,4CAC1F,+BACIwC,EAAWE,KAAI,SAACC,GAAD,OACZ,wBAAIC,IAAKC,OACL,4BAAKF,EAAO/B,IACZ,4BAAK+B,EAAOG,WACZ,4BAAKH,EAAOI,UACZ,4BAAKJ,EAAOK,OAAO,GAAGlC,YAKtC,8BAKA,6BACI,4DCrGGgD,MAhCf,YAAwD,IAAtC9E,EAAqC,EAArCA,SAAU+E,EAA2B,EAA3BA,UAGxB,OAHmD,EAAhBC,aACnC/E,QAAQC,IAAI,UAETF,EAEC,6BACA,sCACA,6BACA,+BACI,+BAAO,4BAAI,4BAAI,wCAAoB,4BAAI,0CAAsB,4BAAI,0CAChE,+BACI+E,EAAUrB,KAAI,SAACuB,GAAD,OACX,wBAAIrB,IAAKC,OACL,4BAAKoB,EAAMrD,IACX,4BAAKqD,EAAMnD,MACX,4BAAKmD,EAAMC,gBAK3B,8BAKA,6BACI,4DC0CZ,SAASC,EAAT,GAA+B,IAAbnF,EAAY,EAAZA,SAEhB,OADAC,QAAQC,IAAI,UAEV,6BACE,wBAAIkF,UAAU,UACZ,4BAAI,kBAAC,IAAD,CAASC,OAAK,EAACC,gBAAgB,SAASC,GAAG,KAA3C,SACJ,4BAAI,kBAAC,IAAD,CAASD,gBAAgB,SAASC,GAAG,YAAYvF,EAAW,wCAAqB,yBAAK4B,GAAG,aAC7F,4BAAI,kBAAC,IAAD,CAAS0D,gBAAgB,SAASC,GAAG,WAAWvF,EAAW,uCAAoB,yBAAK4B,GAAG,aAC3F,4BAAI,kBAAC,IAAD,CAAS0D,gBAAgB,SAASC,GAAG,QAAQvF,EAAW,uCAAoB,0CAMxF,SAASwF,IAEP,OADAvF,QAAQC,IAAI,WAEZ,kBAAC,EAAD,MAIauF,MAhFf,WACExF,QAAQC,IAAI,OACZ,IAAMP,EAAQC,aAAaG,QAAQ,YAFtB,EAGmB4C,qBAAShD,GAH5B,mBAGNK,EAHM,KAGI0F,EAHJ,OAIuB/C,mBAAS,IAJhC,mBAINa,EAJM,KAIMC,EAJN,OAKqBd,mBAAS,IAL9B,mBAKNoC,EALM,KAKKC,EALL,KAoCb,OA7BAW,qBAAU,WACJ3F,GACa,uCAAG,8BAAAiE,EAAA,+EAEiBxE,EAAOgC,kBAFxB,cAEF8C,EAFE,OAGRtE,QAAQC,IAAI,aAAcqE,GAC1Bd,EAAcc,GAJN,SAKgB9E,EAAOiC,iBALvB,OAKFkE,EALE,OAMR3F,QAAQC,IAAI,YAAa0F,GACzBZ,EAAaY,GAPL,kDASR3F,QAAQC,IAAI,MAAZ,MATQ,0DAAH,oDAYbsE,KAEL,CAACxE,IAcA,6BACE,kBAAC,IAAD,KACE,6BACE,kBAACmF,EAAD,CAAQnF,SAAUA,IAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOqF,OAAK,EAACQ,KAAK,KAAI,kBAAC,EAAD,OACtB,kBAAC,IAAD,CAAOA,KAAK,YAAW,kBAAC,EAAD,CAAS7F,SAAUA,EAAUwD,WAAYA,EAAYC,cAAeA,KAC3F,kBAAC,IAAD,CAAOoC,KAAK,WAAU,kBAAC,EAAD,CAAQ7F,SAAUA,EAAU+E,UAAWA,EAAWC,aAAcA,KACtF,kBAAC,IAAD,CAAOa,KAAK,QAAO,kBAAC,EAAD,CACjBpG,OAAQA,EACRO,SAAUA,EACVK,MAjBE,SAACC,EAAMC,GACnBN,QAAQC,IAAI,eACZT,EAAOY,MAAMC,EAAMC,GAAMM,MAAK,SAAA3B,GAAG,OAAIwG,GAAY,MACjDzF,QAAQC,IAAI,WAAYF,IAedG,OAxBG,WACbF,QAAQC,IAAI,gBACZT,EAAOU,SACPuF,GAAY,GACZzF,QAAQC,IAAI,WAAYF,OAsBhB,kBAAC,IAAD,CAAO8F,UAAWN,SC3D9BO,IAASC,OAAO,kBAAC,EAAD,MAAS5B,SAASC,eAAe,W","file":"static/js/main.75a3ff76.chunk.js","sourcesContent":["const URL = \"https://mukh.dk/3rdSemExam\";\r\n\r\n// const URL = \"http://localhost:8080/3rdSemExam\";\r\n\r\nexport default URL;","import URL from \"../settings\";\r\n\r\nfunction handleHttpErrors(res) {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n}\r\n\r\nclass LoginFacade {\r\n  setToken = token => {\r\n    localStorage.setItem(\"jwtToken\", token);\r\n  };\r\n  getToken = () => {\r\n    return localStorage.getItem(\"jwtToken\");\r\n  };\r\n  loggedIn = () => {\r\n    console.log(\"loggedIn func\");\r\n    const loggedIn = this.getToken() != null;\r\n    return loggedIn;\r\n  };\r\n  logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  };\r\n  login = (user, pass) => {\r\n    console.log(\"user, pass\", user, pass);\r\n    const options = this.makeOptions(\"POST\", true, {\r\n      username: user,\r\n      password: pass\r\n    });\r\n    return fetch(URL + \"/api/login\", options)\r\n      .then(handleHttpErrors)\r\n      .then(res => {\r\n        this.setToken(res.token);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  getRole = () => {\r\n    let jwt = localStorage.getItem(\"jwtToken\");\r\n    let jwtData = jwt.split(\".\")[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    return decodedJwtData.roles;\r\n  };\r\n\r\n  makeOptions(method, addToken, body) {\r\n    console.log(\"makeOptions\");\r\n    var opts = {\r\n      method: method,\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    };\r\n    if (addToken && this.loggedIn()) {\r\n      opts.headers[\"x-access-token\"] = this.getToken();\r\n    }\r\n    if (body) {\r\n      opts.body = JSON.stringify(body);\r\n    }\r\n    console.log(\"opts\", opts);\r\n    return opts;\r\n  }\r\n\r\n  fetchAllDrivers = () => {\r\n    console.log(\"fetchingAllDrivers\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/alldrivers\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchAllTrucks = () => {\r\n    console.log(\"fetchingAllTrucks\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/alltrucks\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  deleteDriver = (id) => {\r\n    console.log(\"Deleting driver\", id);\r\n    const options = this.makeOptions(\"DELETE\", true); //True add's the token\r\n    return fetch(URL + \"/api/exam/deletedriver/\" + id, options);\r\n  };\r\n\r\n  editDriver = (id, name) => {\r\n    console.log(\"Editing driver\", name);\r\n    const options = this.makeOptions(\"PUT\", true, name); //True add's the token\r\n    return fetch(URL + \"/api/exam/editdriver/\" + id, options).then(handleHttpErrors);\r\n  };\r\n\r\n  createDriver = (name) => {\r\n    console.log(\"Creating driver\", name);\r\n    const options = this.makeOptions(\"POST\", true, name); //True add's the token\r\n    return fetch(URL + \"/api/exam/createdriver\", options).then(handleHttpErrors);\r\n  };\r\n  \r\n  fetchData = () => {\r\n    console.log(\"fetchData\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    if (this.getRole() === \"admin\") {\r\n      return fetch(URL + \"/api/info/admin\", options).then(handleHttpErrors);\r\n    } else {\r\n      return fetch(URL + \"/api/info/user\", options).then(handleHttpErrors);\r\n    }\r\n  };\r\n}\r\nconst facade = new LoginFacade();\r\nexport default facade;\r\n","import React, { useState } from \"react\";\r\n\r\nfunction LogIn(props) {\r\n  console.log(\"LogIn\");\r\n  const [user, setUser] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  console.log(\"user, pass\", user, pass)\r\n\r\n  const login = (evt) => {\r\n    console.log(\"LogIn - login\");\r\n    evt.preventDefault();\r\n    console.log(\"user, pass\", user, pass)\r\n    props.login(user, pass);\r\n  };\r\n\r\n  const logout = (evt) => {\r\n    console.log(\"LogIn - logout\");\r\n    evt.preventDefault();\r\n    props.logout();\r\n  };\r\n\r\n  const onChange = evt => {\r\n    console.log(\"onChange  ->\", evt.target.id);\r\n    if ([evt.target.id] == \"username\") {\r\n      console.log(\"username\", evt.target.value);\r\n      setUser(evt.target.value);\r\n    } else {\r\n      console.log(\"password\", evt.target.value);\r\n      setPass(evt.target.value);\r\n    }\r\n  };\r\n\r\n  if (!props.loggedIn) {\r\n    return (\r\n      <div>\r\n        <h2>Login</h2>\r\n        <form onChange={onChange}>\r\n          <input placeholder=\"User Name\" id=\"username\" />\r\n          <input placeholder=\"Password\" id=\"password\" type=\"password\" />\r\n          <button onClick={login}>Login</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <h2>Logout</h2>\r\n        <button onClick={logout}>Logout</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LogIn;","import React from \"react\";\r\n\r\nfunction Home() {\r\n    console.log(\"Home\");\r\n    return (\r\n        <div>\r\n            <hr/>\r\n                <h2>Welcome to 3rdSemExam</h2>\r\n            <hr/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\n\r\nfunction Drivers({ loggedIn, allDrivers, setAllDrivers }) {\r\n    console.log(\"Drivers\");\r\n\r\n    const deleteDriverById = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    var driverToDelete = Number(document.getElementById(\"driverToDelete\").value);\r\n                    console.log(\"driverToDelete\", driverToDelete);\r\n                    const deletingDriver = await facade.deleteDriver(driverToDelete);\r\n                    console.log(\"Deleting Driver\", deletingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n    const editDriver = () => {\r\n        if (loggedIn) {\r\n            \r\n            const getData = async () => {\r\n                try {\r\n                    var driverToEditId = Number(document.getElementById(\"driverToEdit\").value);\r\n                    var driverToEditName = {\r\n                        firstName: document.getElementById(\"driverToEditFirstName\").value, \r\n                        lastName: document.getElementById(\"driverToEditLastName\").value\r\n                    };\r\n                    const editingDriver = \r\n                    await facade.editDriver(driverToEditId, driverToEditName);\r\n                    console.log(\"Editing Driver\", editingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n      const createDriver = () => {\r\n        if (loggedIn) {\r\n            \r\n            const getData = async () => {\r\n                try {\r\n                    var driverToCreateName = {\r\n                        firstName: document.getElementById(\"driverToCreateFirstName\").value, \r\n                        lastName: document.getElementById(\"driverToCreateLastName\").value\r\n                    };\r\n                    const creatingDriver = \r\n                    await facade.createDriver(driverToCreateName);\r\n                    console.log(\"Creating Driver\", creatingDriver);\r\n                    const driverData = await facade.fetchAllDrivers();\r\n                    console.log(\"driverData\", driverData);\r\n                    setAllDrivers(driverData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n        if(facade.getRole() === \"admin\"){\r\n        return (\r\n        <div>\r\n        <h3>Drivers</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Driver Id</b></td><td><b>First name</b></td><td><b>Last name</b></td><td><b>Truck name</b></td></tr></thead>\r\n             <tbody>\r\n                {allDrivers.map((driver) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{driver.id}</td>\r\n                        <td>{driver.firstName}</td>\r\n                        <td>{driver.lastName}</td>\r\n                        <td>{driver.trucks[0].name}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        <select id=\"driverToDelete\">\r\n            <option> - select a Driver to delete - </option>\r\n            {allDrivers.map((driver) => {\r\n            return <option key={uuid()} value={driver.id}>{driver.id} - {driver.firstName}</option>;\r\n            })};\r\n        </select>\r\n        <button onClick={deleteDriverById} >Delete Driver</button>\r\n        <hr />\r\n        <select id=\"driverToEdit\">\r\n            <option> - select a Driver to edit - </option>\r\n            {allDrivers.map((driver) => {\r\n            return <option key={uuid()} value={driver.id}>{driver.id} - {driver.firstName}</option>;\r\n            })};\r\n        </select>\r\n            <input placeholder=\"First name\" type=\"text\" id=\"driverToEditFirstName\"/>\r\n            <input placeholder=\"Last name\" type=\"text\" id=\"driverToEditLastName\"/>\r\n            <button onClick={editDriver} >Edit Driver</button>\r\n        <hr />\r\n            <input placeholder=\"First name\" type=\"text\" id=\"driverToCreateFirstName\"/>\r\n            <input placeholder=\"Last name\" type=\"text\" id=\"driverToCreateLastName\"/>\r\n            <button onClick={createDriver} >Create Driver</button>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else if(facade.getRole() === \"user\"){\r\n        return (\r\n        <div>\r\n        <h3>Drivers</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Driver Id</b></td><td><b>First name</b></td><td><b>Last name</b></td><td><b>Truck name</b></td></tr></thead>\r\n             <tbody>\r\n                {allDrivers.map((driver) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{driver.id}</td>\r\n                        <td>{driver.firstName}</td>\r\n                        <td>{driver.lastName}</td>\r\n                        <td>{driver.trucks[0].name}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else {\r\n        return (\r\n        <div>\r\n            <h2> Please login to view data</h2>\r\n        </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Drivers;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\n\r\nfunction Trucks({ loggedIn, allTrucks, setAllTrucks }) {\r\n    console.log(\"Trucks\");\r\n\r\n    if(loggedIn){\r\n        return (\r\n        <div>\r\n        <h3>Trucks</h3>\r\n        <hr />\r\n        <table>\r\n            <thead><tr><td><b>Truck Id</b></td><td><b>Truck name</b></td><td><b>Capacity</b></td></tr></thead>\r\n             <tbody>\r\n                {allTrucks.map((truck) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{truck.id}</td>\r\n                        <td>{truck.name}</td>\r\n                        <td>{truck.capacity}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else {\r\n        return (\r\n        <div>\r\n            <h2> Please login to view data</h2>\r\n        </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Trucks;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Switch\r\n} from \"react-router-dom\";\r\nimport facade from \"./components/loginFacade\";\r\nimport LogIn from \"./components/LogIn\";\r\nimport Home from \"./components/Home\";\r\nimport Drivers from \"./components/Drivers\";\r\nimport Trucks from \"./components/Trucks\";\r\n\r\nfunction App() {\r\n  console.log(\"App\");\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const [loggedIn, setLoggedIn] = useState(token ? true : false);\r\n  const [allDrivers, setAllDrivers] = useState([]);\r\n  const [allTrucks, setAllTrucks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n        const getData = async () => {\r\n            try {\r\n                const driverData = await facade.fetchAllDrivers();\r\n                console.log(\"driverData\", driverData);\r\n                setAllDrivers(driverData);\r\n                const truckData = await facade.fetchAllTrucks();\r\n                console.log(\"truckData\", truckData);\r\n                setAllTrucks(truckData);\r\n            } catch (e) {\r\n                console.log(\"err\", e);\r\n            }\r\n        };\r\n        getData();\r\n    }\r\n}, [loggedIn]);\r\n\r\n  const logout = () => {\r\n    console.log(\"App - logout\");\r\n    facade.logout();\r\n    setLoggedIn(false);\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  const login = (user, pass) => {\r\n    console.log(\"App - login\");\r\n    facade.login(user, pass).then(res => setLoggedIn(true));\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  return (\r\n    <div>\r\n      <Router >\r\n        <div>\r\n          <Header loggedIn={loggedIn} />\r\n          <Switch>\r\n            <Route exact path=\"/\"><Home /></Route>\r\n            <Route path=\"/drivers\"><Drivers loggedIn={loggedIn} allDrivers={allDrivers} setAllDrivers={setAllDrivers}/></Route>\r\n            <Route path=\"/trucks\"><Trucks loggedIn={loggedIn} allTrucks={allTrucks} setAllTrucks={setAllTrucks}/></Route>\r\n            <Route path=\"/log\"><LogIn\r\n              facade={facade}\r\n              loggedIn={loggedIn}\r\n              login={login}\r\n              logout={logout}\r\n            /></Route>\r\n            <Route component={NoMatch} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Header({ loggedIn }) {\r\n  console.log(\"Header\");\r\n  return (\r\n    <div>\r\n      <ul className=\"header\">\r\n        <li><NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/drivers\">{loggedIn ? <div>Drivers</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/trucks\">{loggedIn ? <div>Trucks</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/log\">{loggedIn ? <div>Logout</div> : <div>Login</div>}</NavLink></li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction NoMatch() {\r\n  console.log(\"NoMatch\");\r\n  return (\r\n  <Home />\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}